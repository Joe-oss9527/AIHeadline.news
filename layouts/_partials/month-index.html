{{- $monthInfo := .Params.month -}}
{{- $year := cond (and $monthInfo (isset $monthInfo "year")) $monthInfo.year (.Title | split "-" | index 0) -}}
{{- $monthRaw := cond (and $monthInfo (isset $monthInfo "month")) $monthInfo.month ((.Title | split "-" | index 1)) -}}
{{- $monthInt := int $monthRaw -}}
{{- $month := printf "%02d" $monthInt -}}
{{- $dayCount := cond (and $monthInfo (isset $monthInfo "dayCount")) $monthInfo.dayCount (len .RegularPages) -}}
{{- $dailyPages := .RegularPages.ByDate.Reverse -}}

<div class="newspaper-month-header hx-border-b-4 hx-border-double hx-border-gray-900 dark:hx-border-gray-100 hx-pb-6 hx-mb-8">
  <div class="hx-text-center">
    <h1 class="page-title hx-text-4xl md:hx-text-5xl hx-font-bold hx-font-serif hx-mb-2 hx-text-gray-900 dark:hx-text-gray-100">
      {{ $year }}å¹´{{ $month }}æœˆ
    </h1>
    <div class="sub-head-en hx-text-lg md:hx-text-xl hx-text-gray-600 dark:hx-text-gray-400 hx-italic hx-mb-4">
      AI DAILY BRIEFING ARCHIVE
    </div>
    <div class="lede-cn hx-text-gray-600 dark:hx-text-gray-400">
      æœ¬æœˆæ”¶å½• {{ $dayCount }} ä»½ AI æ—¥æŠ¥ï¼Œæ¶µç›–æŠ€æœ¯çªç ´ã€äº§ä¸šåŠ¨æ€ã€æŠ•èèµ„ç­‰å…³é”®èµ„è®¯
    </div>
  </div>
</div>

<div class="newspaper-daily-list hx-mt-12">
  <h2 class="section-title hx-text-2xl hx-font-bold hx-mb-6 hx-font-serif hx-flex hx-items-center">
    <span class="hx-mr-3">ğŸ“°</span>
    æœ¬æœˆæ—¥æŠ¥
    <span class="en hx-ml-auto hx-text-sm hx-font-normal hx-text-gray-500">
      Daily AI Briefings
    </span>
  </h2>

  {{ if gt (len $dailyPages) 0 }}
    <div class="newspaper-articles-grid">
      {{ range $dailyPages }}
        {{- $displayDate := .Date.Format "1 æœˆ 2 æ—¥" -}}
        <div>
          <a href="{{ .RelPermalink }}">{{ $displayDate }} æ—¥æŠ¥</a>
          {{ with .Params.sources }}
            <p class="hx-mt-1 hx-text-sm hx-text-slate-500 dark:hx-text-slate-400">èšåˆæ¥æºï¼š{{ delimit . " / " }}</p>
          {{ end }}
        </div>
      {{ end }}
    </div>
  {{ else }}
    <div class="hx-text-center hx-text-slate-500 dark:hx-text-slate-400">
      æœ¬æœˆæš‚æ— å¯å±•ç¤ºçš„æ—¥æŠ¥å†…å®¹ã€‚
    </div>
  {{ end }}
</div>
