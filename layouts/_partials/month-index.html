{{- $monthInfo := .Params.month -}}
{{- $year := cond (and $monthInfo (isset $monthInfo "year")) $monthInfo.year (.Title | split "-" | index 0) -}}
{{- $monthRaw := cond (and $monthInfo (isset $monthInfo "month")) $monthInfo.month ((.Title | split "-" | index 1)) -}}
{{- $monthInt := int $monthRaw -}}
{{- $month := printf "%02d" $monthInt -}}
{{- $dayCount := cond (and $monthInfo (isset $monthInfo "dayCount")) $monthInfo.dayCount (len .RegularPages) -}}
{{- $dailyPages := .RegularPages.ByDate.Reverse -}}

<div class="newspaper-month-header border-b-4 border-double border-gray-900 dark:border-gray-100 pb-6 mb-8">
  <div class="text-center">
    <h1 class="page-title text-4xl md:text-5xl font-bold font-serif mb-2 text-gray-900 dark:text-gray-100">
      {{ $year }}å¹´{{ $month }}æœˆ
    </h1>
    <div class="sub-head-en text-lg md:text-xl text-gray-600 dark:text-gray-400 italic mb-4">
      AI DAILY BRIEFING ARCHIVE
    </div>
    <div class="lede-cn text-gray-600 dark:text-gray-400">
      æœ¬æœˆæ”¶å½• {{ $dayCount }} ä»½ AI æ—¥æŠ¥ï¼Œæ¶µç›–æŠ€æœ¯çªç ´ã€äº§ä¸šåŠ¨æ€ã€æŠ•èèµ„ç­‰å…³é”®èµ„è®¯
    </div>
  </div>
</div>

<div class="newspaper-daily-list hx-mt-12">
  <h2 class="section-title text-2xl font-bold mb-6 font-serif flex items-center">
    <span class="mr-3">ğŸ“°</span>
    æœ¬æœˆæ—¥æŠ¥
    <span class="en ml-auto text-sm font-normal text-gray-500">
      Daily AI Briefings
    </span>
  </h2>

  {{ if gt (len $dailyPages) 0 }}
    <div class="newspaper-articles-grid">
      {{ range $dailyPages }}
        {{- $displayDate := .Date.Format "1 æœˆ 2 æ—¥" -}}
        <div>
          <a href="{{ .RelPermalink }}">{{ $displayDate }} æ—¥æŠ¥</a>
          {{ with .Params.sources }}
            <p class="hx-mt-1 hx-text-sm hx-text-slate-500 dark:hx-text-slate-400">èšåˆæ¥æºï¼š{{ delimit . " / " }}</p>
          {{ end }}
        </div>
      {{ end }}
    </div>
  {{ else }}
    <div class="hx-text-center hx-text-slate-500 dark:hx-text-slate-400">
      æœ¬æœˆæš‚æ— å¯å±•ç¤ºçš„æ—¥æŠ¥å†…å®¹ã€‚
    </div>
  {{ end }}
</div>
